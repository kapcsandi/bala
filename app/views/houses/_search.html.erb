<% form_for 'q', :url => houses_path, :html => { :method => :get }  do |f| %>
 <div style="overflow:hidden">
  <div class="span-3 label"><%= t :city %></div>
  <div class="span-3 field">
  <%= f.select 'where', Taggable.find_by_field('city_id').tags.map{|tag| tag.name }, :selected => (params[:q] ? params[:q][:where] : ''), :include_blank => true %>
  </div>
  <div class="span-5 label"><%= t :persons %></div>
  <div class="span-1 field">
  <%= f.select :persons, (1..15), :selected => (params[:q] ? params[:q][:persons].to_i : ''), :include_blank => true %>
  </div>
  <div class="span-2 label"><%= t :code %></div>
  <div class="span-3 last field">
  <%= f.text_field :code, :size=> 12, :value => (params[:q] ? params[:q][:code] : '') %>
  </div>
 </div>
 <div style="overflow:hidden"> 
  <div class="span-3 label"><%= t :date_from %></div>
  <div class="span-4 last field">
  <%= calendar_date_select 'q', 'from', :order => [:year, :month, :day], :size=> 15, :value => params[:q] ? params[:q][:from] : '' %>
  </div>
  <div class="label"><%= t :date_to %></div>
  <div class="span-4 last field">
  <%= calendar_date_select 'q', 'to', :order => [:year, :month, :day], :size=> 15, :value => params[:q] ? params[:q][:to] : '' %>
  </div>
  <div class="prepend-2 span-3">
  <%= submit_tag t :search %><br />
  <%= link_to  t(:detailed_search), url_for(:controller => 'houses', :action => 'index', :advanced => '1'), :method => :get  %>
  </div>
 </div>
<% end %>